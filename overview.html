<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Over View - MinorWork Framework</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="main.css">
<link rel="stylesheet" href="prism-okaidia.css">
<link rel="icon" type="image/png" href="favicon.png"/>
</head>
<body>
<header>
<div class="wrapper">
<a id="logoLink" href="https://cqd.github.io/minorwork/"><img src="logo.svg" height="33"></a>
<nav><a href="https://github.com/CQD/minorwork/blob/master/README.md">Document</a> <a href="https://github.com/CQD/minorwork">Github</a></nav>
</div>
</header>

<article class="wrapper">
<h1>MinorWork Framework Overview</h1>
<p>A minilistic example of using MinorWork would look like this:</p>
<pre><code class="language-php">$app = new \MinorWork\App; // Create container object

$app-&gt;setRouting($route);  // Set routing table

$app-&gt;run();               // Find matching route,
                           // run request handler,
                           // output rendered result.</code></pre>
<p>To use MinorWork in a real life situation, there are some concepts you should know:</p>
<ul>
<li><a href="#container">Container</a></li>
<li><a href="#routing">Routing</a></li>
<li><a href="#request_handler">Request handler</a></li>
<li><a href="#rendering_output">Rendering output</a></li>
</ul>
<p>If you have used other frameworks before(ex: Laravel or Slim), it's likely you already know what container and routing is about. But request handler would be a bit different from most frameworks.</p>
<p>There is no service provider and middleware in MinorWork.</p>
<p><a name='container'></a></p>
<h2>Container</h2>
<p>Container means &quot;you put everything into this&quot;.</p>
<p><code>\MinorWork\App</code> class is the core of MinorWork, it also serve as <a href="https://www.google.com/?q=dependency+injection">DI</a> container.</p>
<p>It works like this:</p>
<pre><code class="language-php">$app = new App;

// Set class name
$app-&gt;set('dataLoader', '\Data\Loader\Class');  // Class name of given item.
$app-&gt;dataLoader = '\Data\Loader\Class';        // This also works

// Get value from container
$dataLoader = $app-&gt;get('dataLoader');          // An object of your data loader class
$dataLoader = $app-&gt;dataLoader;                 // This also works.</code></pre>
<p>For detail, check <a href="container.html">container</a> document.</p>
<p><a name='routing'></a></p>
<h2>Routing</h2>
<p>Routing means &quot;decide what logic to run according to URL&quot;.</p>
<p>A simple routing table (collection of routes) looks like this:</p>
<pre><code class="language-php">$routing = [
    'login' =&gt; [
        'GET',                    // Method
        '/login',                 // url pattern
        '\Controller\User:login',  // Handler
    ],
    'user'    =&gt; ['/u/{id}', '\Controller\User:profile'],
    'article' =&gt; ['/a/{id}', '\Controller\Article:display'],
];</code></pre>
<p>A route would include:</p>
<ul>
<li>Name of that route (key of that route)</li>
<li>HTTP Method (default: <code>['GET', 'POST']</code>)</li>
<li>URL pattern (default: name of that route)</li>
<li>Request Handler</li>
</ul>
<p>There are also pre-defined routes:</p>
<ul>
<li><code>default</code> route is used when no other route is matched. This is the default 404 handler.</li>
<li><code>defaultError</code> route is called when your application throws an exception. This is the default error handler.</li>
</ul>
<p>You can override pre-defined route by defining a route of the same name.</p>
<p>For detail, check <a href="routing.html">routing</a> document.</p>
<p><a name='request_handler'></a></p>
<h2>Request handler</h2>
<p>Request handler is the logic to run when route matches, it should also tell the fromework what the user should see.</p>
<p>A request handler can be either:</p>
<ul>
<li>A controller/method pair string (recommended).
<ul>
<li>Ex: <code>'\Controller\User:login'</code></li>
</ul></li>
<li>A PHP <a href="http://php.net/manual/en/language.types.callable.php">callable</a>, like name of a function, or a closure, or other callable type.</li>
</ul>
<p>When called, request handler will be given three inputs:</p>
<ul>
<li>The container itself.</li>
<li>URL parameter matched in router
<ul>
<li>For url pattern <code>/user/{id:\d+}[/{name}]</code>, <code>$params</code> for <code>/user/42</code> would be <code>['id' =&gt; 42]</code></li>
</ul></li>
<li>Return value of previous request handler, or null if there is no previous handler.</li>
</ul>
<p>A simple request handler looks likes this:</p>
<pre><code class="language-php">function basicHandler($app, $params, $prev) {
    $app-&gt;view-&gt;prepare([
        'params' =&gt; $params,
        '$prev' =&gt; $prev,
    ]);
}</code></pre>
<p>For detail, check <a href="request_handler.html">request handler</a> document.</p>
<p><a name='rendering_output'></a></p>
<h2>Rendering Output</h2>
<p>To output, you can set a string into <code>$app-&gt;view</code>, or use a view handler(anything that can cast to string will do).</p>
<p>You should not do echo anything in request handler.
MinorWork only render view after finish execute request handler. So you can change the content any time.</p>
<p>MinorWork comes with two simple template engine.</p>
<ul>
<li><code>\MinorWork\View\SimpleView</code> is a <code>str_replace</code> based engine. This is the default engine.</li>
<li><code>\MinorWork\View\JsonView</code> is a <code>json_encode</code> based JSON renderer.</li>
</ul>
<p>For detail, check <a href="view.html">view</a> document.</p>
</article>

<footer>
<div class="wrapper"><p>Made with ‚ù§ by <a href="https://github.com/cqd">CQD</a>, 2017<br>MIT License</p></div>
</footer>

<script src="prism.js"></script>
<script src="prism-php.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-368263-21', 'auto');
  ga('send', 'pageview', '\x2Foverview');
</script>
</body>
</html>
